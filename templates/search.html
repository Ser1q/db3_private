{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
  <h1>Search Caregivers</h1>

  <form method="get" class="row g-3 mb-4">
    <div class="col-md-4">
      <label for="caregiving_type" class="form-label">Caregiving type</label>
      <select id="caregiving_type" name="caregiving_type" class="form-select">
        <option value="">Any</option>
        <option value="Babysitter" {% if selected_type == "Babysitter" %}selected{% endif %}>Babysitter</option>
        <option value="Elderly Care" {% if selected_type == "Elderly Care" %}selected{% endif %}>Elderly Care</option>
        <option value="Playmate for children" {% if selected_type == "Playmate for children" %}selected{% endif %}>
          Playmate for children
        </option>
      </select>
    </div>

    <div class="col-md-4">
      <label for="city" class="form-label">City</label>
      <input
        id="city"
        name="city"
        type="text"
        class="form-control"
        placeholder="e.g. Astana"
        value="{{ city|default_if_none:'' }}"
      >
    </div>

    <div class="col-md-4 d-flex align-items-end">
      <button type="submit" class="btn btn-primary w-100">Search</button>
    </div>
  </form>

  {% if caregivers %}
    <h2 class="h4 mb-3">Results ({{ caregivers|length }})</h2>
    <div class="list-group">
      {% for c in caregivers %}
        <div class="list-group-item">
          <div class="d-flex justify-content-between">
            <div>
              <strong>{{ c.caregiver_user.given_name }} {{ c.caregiver_user.surname }}</strong><br>
              <small>{{ c.caregiving_type }} Â· {{ c.caregiver_user.city }}</small><br>
              <small>Email: {{ c.caregiver_user.email }}</small><br>
              {% if c.caregiver_user.phone_number %}
                <small>Phone: {{ c.caregiver_user.phone_number }}</small><br>
              {% endif %}
            </div>
            <div class="text-end">
              {% if c.hourly_rate %}
                <span class="badge bg-secondary">{{ c.hourly_rate }} $/hour</span><br>
              {% endif %}
            </div>
          </div>
          {% if c.caregiver_user.profile_description %}
            <p class="mt-2 mb-0">{{ c.caregiver_user.profile_description }}</p>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No caregivers match your criteria yet.</p>
  {% endif %}
</div>
{% endblock %}
